<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="算是开发日志吧.">
    <title> | Sraft (一)</title>
    
    <link rel="stylesheet" href="https://sdttttt.github.io/style.css?h=a56f213afcf5d255b64918e7a9e0f468ef1d0ac2954b49f36003998666482371">
    
</head>
<body>
    
<header class="space">
    <a href="https:&#x2F;&#x2F;sdttttt.github.io">&LeftArrow; Home</a>
</header>

    
<main>
    <h1>Sraft (一)</h1>
    
    <p class="secondary">21 September, 2020</p>
    
    <div class="space"></div>
    <p>今天开始算是正式编写Sraft这个库, 开发的原因有两个:</p>
<ul>
<li>我需要通过这次开发来熟悉Raft这个协议.<del>(以后面试或者和人攀谈也更有底气)</del></li>
<li>我的微服务框架的服务中心需要一个能达成分布式一致性的功能.</li>
</ul>
<p>语言采用的是Go, 目前的编程模型大概也完成了, 下面我来介绍:</p>
<blockquote>
<p>本人喜欢简单并且高效的设计, 对于设计复杂难以实现的东西会感到不适(脑子不够用),</p>
</blockquote>
<h3 id="raft-kernel">Raft Kernel</h3>
<p>整个编程模型会有比较多的模块, 整体采用的是微核架构, <code>Raft Kernel</code>会协调各个模块之间的工作.</p>
<p>模块之间的通信由<code>Raft Kernel</code>来完成. 通信方式采用<code>Channel</code>异步非阻塞的形式.</p>
<h3 id="exchange-network">Exchange Network</h3>
<p>外部通信从这里进入, 由<code>Exchange Network</code>将通信内容封装为事件, 发送给<code>Raft Kernel</code>.</p>
<p>或者<code>Raft Kernel</code>传递事件给<code>Exchange Network</code>, 再由<code>Exchange Network</code>执行外部通信.</p>
<h3 id="state-machine">State Machine</h3>
<p>Raft协议的核心实现, 状态机会在<code>Leader</code>, <code>Follower</code>, <code>Candidate</code>三种角色之间自动切换, 
每一角色处理的事件都是一样的, 但是具体过程是不一样的. (这个部分的密度会比较大)</p>
<h3 id="data-log-synchronizer">Data Log Synchronizer</h3>
<p>负责同步数据的模块, 采用的是日志提交形式.</p>
<hr />
<p>以上的我目前已经构思出的编程模型, 但是为暂定. 实际的编写模型肯定会有少许修改.</p>
<p>PROJECT: github.com/sdttttt/sraft</p>

</main>

    <div class="dark-mode-buttons">
        <button class="dark-mode-button" id="dark-mode-on"><img src="https://sdttttt.github.io/dark_mode.svg" width="24" height="24" alt="Dark mode" aria-label="dark mode toggle" title="Dark mode"></button>
        <button class="dark-mode-button" id="dark-mode-off"><img src="https://sdttttt.github.io/light_mode.svg" width="24" height="24" alt="Light mode" aria-label="light mode toggle" title="Light mode"></button>
    </div>
    <script>
        const cls = document.body.classList;
        const getSessionTheme = sessionStorage.getItem("theme");
        if (getSessionTheme === "dark") {
            cls.toggle("dark-mode", true);
        } else if (getSessionTheme === "light") {
            cls.toggle("dark-mode", false);
        } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
            cls.toggle("dark-mode", true);
        }

        document.getElementById("dark-mode-on").addEventListener("click", function(e) {
            cls.toggle("dark-mode", true);
            sessionStorage.setItem("theme", "dark");
        });
        document.getElementById("dark-mode-off").addEventListener("click", function(e) {
            cls.toggle("dark-mode", false);
            sessionStorage.setItem("theme", "light");
        });
    </script>
    <noscript>
        <style>
            .dark-mode-buttons {
                display: none;
            }
        </style>
    </noscript>
</body>
</html>
